/* LFInteractive LLC. All Rights Reserved */
function createCalendar(e,a,t,l,n,s=[],d=views.days,c=null){const r=$(`#calendar-${e}`),i=new Date(a,t-1,1),o=new Date;r.empty();const g=$('<div class="calendar-header"></div>'),u=$('<button class="calendar-nav-button calendar-prev-button fa fa-chevron-left"></button>'),v=$('<button class="calendar-nav-button calendar-next-button fa fa-chevron-right"></button>'),p=$('<span class="calendar-time-selector"></span>'),h=$(`<span class="calendar-current-month calendar-selector" title="select month">${i.toLocaleString("en-us",{month:"long"})}</span>`),C=$(`<span class="calendar-current-year calendar-selector" title="select year">${i.toLocaleString("en-us",{year:"numeric"})}</span>`),y=$('<div class="calendar-months calendar-container"></div>'),m=$('<div class="calendar-years calendar-container"></div>'),w=$('<div class="calendar-days calendar-container"></div>'),F=d==views.days,Y=d==views.months,b=d==views.years,f=()=>l.getFullYear()===a,M=()=>l.getMonth()===t-1&&f();Y&&h.addClass("selected"),b&&(C.addClass("selected"),v.addClass("disabled"),u.addClass("disabled"));Y?f()?u.addClass("disabled"):u.removeClass("disabled"):M()?u.addClass("disabled"):u.removeClass("disabled"),b||(u.click(()=>Y?(()=>{if(!f()){const a=new Date(i.getFullYear()-1,i.getMonth(),1);createCalendar(e,a.getFullYear(),a.getMonth()+1,l,n,s,views.months,c)}})():(()=>{if(!M()){const a=new Date(i.getFullYear(),i.getMonth()-1,1);createCalendar(e,a.getFullYear(),a.getMonth()+1,l,n,s,views.days,c)}})()),v.click(()=>Y?(()=>{const a=new Date(i.getFullYear()+1,i.getMonth(),1);createCalendar(e,a.getFullYear(),a.getMonth()+1,l,n,s,views.months,c)})():(()=>{const a=new Date(i.getFullYear(),i.getMonth()+1,1);createCalendar(e,a.getFullYear(),a.getMonth()+1,l,n,s,views.days,c)})())),h.click(()=>createCalendar(e,a,t,l,n,s,views.months,c)),C.click(()=>createCalendar(e,a,t,l,n,s,views.years,c)),p.append(h),p.append(C),g.append(u),g.append(p),g.append(v),r.append(g),r.calendar.append(m);for(let d=0;6>d;d++){const r=$('<button class="calendar-year calendar-item"></button>').text(l.getFullYear()+d);a+d<l.getFullYear()&&r.addClass("invalid"),l.getFullYear()+d===a&&r.addClass("selected"),a+d!==o.getFullYear()||r.hasClass("selected")||r.addClass("current"),r.click(()=>{if(!r.hasClass("invalid")){const a=l.getFullYear()+d;createCalendar(e,a,t,l,n,s,views.months,c)}}),m.append(r)}b||m.css("display","none"),Y||y.css("display","none"),r.append(y);for(let d=0;12>d;d++){const r=$('<button class="calendar-month calendar-item"></button>').text(new Date(a,d,1).toLocaleString("en-us",{month:"long"}));a===l.getFullYear()&&d<l.getMonth()&&r.addClass("invalid"),a===o.getFullYear()&&d===t-1?r.addClass("selected"):a===l.getFullYear()&&d===l.getMonth()&&r.addClass("current"),r.click(()=>{if(!r.hasClass("invalid")){createCalendar(e,a,d+1,l,n,s,views.days,c)}}),y.append(r)}r.append(w),F||w.css("display","none");const D=new Date(a,t,0).getDate(),k=i.getDay();for(let e=0;k>e;e++){const e=$('<div class="calendar-day invalid calendar-item"></div>');w.append(e)}for(let e=1;D>=e;e++){const d=$('<div class="calendar-day calendar-item"></div>').text(e);i.getFullYear()===o.getFullYear()&&i.getMonth()===o.getMonth()&&e===o.getDate()&&d.addClass("current"),null!=c&&c.getMonth()==i.getMonth()&&c.getFullYear()==i.getFullYear()&&c.getDate()==e&&d.addClass("selected");const g=new Date(a,t-1,e),u=g.toISOString().split("T")[0];(s.includes(u)||g>n||l>g)&&(d.addClass("invalid"),d.attr("title","This day is not available!"),d.html(`${e}<p>This day is not available!</p>`)),d.click(()=>{d.hasClass("invalid")||(r.find(".calendar-day.selected").removeClass("selected"),d.addClass("selected"),r.attr("date",u),c=g,r.trigger("change"))}),w.append(d)}}const views={days:0,months:1,years:2};