/* LFInteractive LLC. All Rights Reserved */
(()=>{async function e(){let e="",r="";document.cookie.split(";").forEach(o=>{try{let n=o.split("="),t=n[0].trim(),a=n[1].trim();"username"==t?e=a:"password"==t&&(r=a)}catch{}});let n=await o(e,r);return{success:null==n.error,user:n}}async function o(e,o){let r=new FormData;r.append("username",e),r.append("password",o);let n=await fetch("/assets/php/auth.inc.php?c=login",{body:r,method:"POST"}),t={error:"Unknown error has occurred!"};try{t=await n.json()}catch(e){console.error(e)}return n.ok&&(document.cookie=`username=${e}; expires=${new Date(3e3,1,1).toLocaleString("GMT")}; path=/panel`,document.cookie=`password=${o}; expires=${new Date(3e3,1,1).toLocaleString("GMT")}; path=/panel`),t}let r={};window.location.pathname.startsWith("/panel/login")||window.location.pathname.startsWith("/panel/register")?e().then(e=>{e.success&&(window.location.href="/panel/")}):e().then(e=>{e.success?(r=e.user,console.log(`Logged in as ${r.username}`),Array.from($(".username")).forEach(e=>{e.innerText=r.username})):(console.error(e),window.location.href="/panel/login")}),$("#login-form input").on("keydown",e=>{"Enter"==e.key&&$("#login-form .btn")[0].click()}),$("#login-form .btn").on("click",()=>{o($("#username").val(),$("#password").val()).then(e=>{null!=e.error?($("#login-form .error").css("opacity","1"),$("#login-form .error")[0].innerText=e.error):($("#login-form .error").css("opacity","0"),window.location.href="/panel")})})}).call();